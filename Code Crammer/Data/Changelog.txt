# Code Crammer v1.3.0 - The "Battle-Hardened" Update

This isn't just a fresh coat of paint. We tore the engine down and rebuilt it. Code Crammer is now faster, safer, and more stable than ever before.

### üõ°Ô∏è Security & Stability (The "Bulletproof" Protocol)
*   **Clipboard Safety Valve:** Added a hard 100MB limit and a dedicated background thread (STA) for clipboard operations. No more freezing the UI or crashing the OS if you try to copy a massive project.
*   **Path Traversal Protection:** Implemented rigorous path validation to ensure malicious project files can't trick the scraper into reading files outside the solution folder.
*   **ReDoS Protection:** Optimized Regex patterns to prevent "Catastrophic Backtracking" on complex files.
*   **Corrupt Settings Recovery:** If your settings file gets corrupted (e.g., power loss), the app now gracefully resets to defaults instead of crashing on startup.
*   **File Handle Safety:** The scraper now handles locked files gracefully. If one file fails (e.g., access denied), it logs the error and continues processing the rest of the project instead of aborting the whole job.

### üöÄ Performance & Engineering
*   **Async I/O Everywhere:** We rewrote the file processing engine to use Asynchronous I/O. Reading thousands of files no longer blocks the UI thread. The app remains responsive even during heavy loads.
*   **Memory Optimization:** Implemented a strict limit (200 items) on the internal file cache to prevent memory ballooning on massive solutions.
*   **Zero-Flicker TreeView:** Enabled Double-Buffering on the file tree. Expanding large folders is now buttery smooth with no visual stutter.
*   **Smart Spell Check:** The message editor spell checker now throttles itself and cancels old tasks immediately, preventing CPU spikes when pasting large blocks of text.

### üåì Visual Skins (Dark Mode)
*   **Turn off the lights:** Added a comprehensive Dark Theme for late-night coding sessions.
*   **Smart Styling:** The "Matrix" log console stays high-contrast black/green, and menus use custom renderers to look native in Dark Mode.

### üï∞Ô∏è The "Time Machine" (Session History & Undo)
*   **Rolling History:** Automatically saves your session state every time you click Generate.
*   **Undo/Redo System:** Accidentally unchecked a massive folder? The new Undo/Redo buttons track your changes and tell you exactly what action you are undoing.
*   **Smart Expansion:** The file tree now intelligently remembers which folders were expanded, but strictly enforces a "Selection = Expansion" rule to keep the view clean.

### ‚ö° Engine Upgrades
*   **Folder Cramming:** Right-click a folder -> Cram to recursively process it into a single Notepad window.
*   **Polyglot Output:** Expanded Markdown support for SQL, HTML, JS, TS, and Python.
*   **Designer De-Bloat:** Improved "Squish" logic to strip verbose WinForms casting garbage, saving massive token counts.

---

### üêõ Bug Fixes
*   Fixed a race condition where the TreeView could become corrupted if options were toggled rapidly.
*   Fixed a logic bug where the "Token Counter" would continue processing in the background even after a new count was started.
*   Fixed an issue where the "Massage" easter egg would block the UI thread (it now shakes the window responsibly).
*   Fixed the "Settings Upgrade" trap that could soft-lock the application.